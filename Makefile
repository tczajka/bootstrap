SHELL:=/bin/bash
.DELETE_ON_ERROR:

.PHONY: all
all: bin/nothing1 bin/hello1 bin/octal1

bin:
	mkdir -p bin

.PHONY: clean
clean:
	rm -fr bin/

bin/nothing0: | bin
	echo -en '\0177ELF\01\01\01\0\0\0\0\0\0\0\0\0\02\0\03\0\01\0\0\0\0124\0\01\0\064\0\0\0\0\0\0\0\0\0\0\0\064\0\040\0\01\0\050\0\0\0\0\0\01\0\0\0\0124\0\0\0\0124\0\01\0\0\0\0\0\014\0\0\0\014\0\0\0\05\0\0\0\0\020\0\0\0270\x1\0\0\0\0273\x7\0\0\0\0315\0200' > bin/nothing0
	chmod u+x bin/nothing0

bin/hello0: | bin
	echo -en '\0177ELF\01\01\01\0\0\0\0\0\0\0\0\0\02\0\03\0\01\0\0\0\0124\0\01\0\064\0\0\0\0\0\0\0\0\0\0\0\064\0\040\0\01\0\050\0\0\0\0\0\01\0\0\0\0124\0\0\0\0124\0\01\0\0\0\0\0\065\0\0\0\065\0\0\0\05\0\0\0\0\020\0\0\0276\0173\0\01\0\0212\06\042\0300\0164\023\0270\04\0\0\0\0273\01\0\0\0\0213\0316\0211\0332\0315\0200\0106\0353\0347\0270\01\0\0\0\061\0333\0315\0200Hello World!\n\0' > bin/hello0
	chmod u+x bin/hello0

bin/octal0: | bin
	echo -en '\0177ELF\01\01\01\0\0\0\0\0\0\0\0\0\02\0\03\0\01\0\0\0\0124\0\01\0\064\0\0\0\0\0\0\0\0\0\0\0\064\0\040\0\01\0\050\0\0\0\0\0\01\0\0\0\0124\0\0\0\0124\0\01\0\0\0\0\0\0222\0\0\0\0222\0\0\0\07\0\0\0\0\020\0\0\0350\0102\0\0\0\040\0300\0164\0166\074\043\0164\010\054\060\074\010\0162\021\0353\0353\0350\055\0\0\0\074\012\0164\0342\040\0300\0164\0135\0353\0361\0211\0307\0350\034\0\0\0\054\060\074\010\0163\07\0301\0347\03\01\0307\0353\0356\04\060\0211\0306\0211\0370\0350\042\0\0\0\0211\0360\0353\0276\0270\03\0\0\0\061\0333\0271\0345\0\01\0\0272\01\0\0\0\0315\0200\040\0300\0164\06\074\01\0165\046\0212\01\0303\0271\0345\0\01\0\0210\01\0270\04\0\0\0\0273\01\0\0\0\0211\0332\0315\0200\074\01\0165\012\0303\0270\01\0\0\0\061\0333\0315\0200\0270\01\0\0\0\0211\0303\0315\0200\0' > bin/octal0
	chmod u+x bin/octal0

bin/nothing1: bin/octal0 src/nothing1.oct bin/nothing0 | bin
	./bin/octal0 < src/nothing1.oct > bin/nothing1
	cmp bin/nothing1 bin/nothing0
	chmod u+x bin/nothing1

bin/hello1: bin/octal0 src/hello1.oct bin/hello0 | bin
	./bin/octal0 < src/hello1.oct > bin/hello1
	cmp bin/hello1 bin/hello0
	chmod u+x bin/hello1

bin/octal1: bin/octal0 src/octal1.oct | bin
	./bin/octal0 < src/octal1.oct > bin/octal1
	cmp bin/octal1 bin/octal0
	chmod u+x bin/octal1
